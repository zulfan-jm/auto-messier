<?xml version="1.0"?>
<launch>
    <arg name="use_rosbag" default="false"/>
    <arg name="use_amcl" default="false"/>
    <arg name="use_odom_tf" default="true"/>
    <arg name="path" default="/home/rovit/"/>
    <arg name="file_1" default="imuscanodom"/>

    <arg name="new_path" default="/home/rovit/ta-zul/src/rovid_1/"/>
    <arg name="use_filebag" default="true"/>

    <node name="rplidarNode"          pkg="rplidar_ros"  type="rplidarNode" output="screen" unless="$(arg use_filebag)">
        <param name="serial_port"         type="string" value="/dev/ttyUSB1"/>
        <!-- A1/A2 -->
        <param name="serial_baudrate"     type="int"    value="115200"/>
        <!-- param name="serial_baudrate"     type="int"    value="256000"A3 -->
        <param name="frame_id"            type="string" value="laser_link"/>
        <param name="inverted"            type="bool"   value="false"/>
        <param name="angle_compensate"    type="bool"   value="true"/>
    </node>

    <node pkg="rosserial_python" type="serial_node.py" name="serial_node" unless="$(arg use_filebag)">
        <param name="port" value="/dev/ttyUSB0"/>
        <param name="baud" value="576000"/>
    </node>
    <node pkg="rosbag" type="play" name="play" output="screen" args="--clock $(arg path)$(arg file_1).bag" if="$(arg use_rosbag)"/>

    <node pkg="rovid_1" type="new_odom" name="odom_from_arduino">
        <param name="publish_tf" value="$(arg use_odom_tf)"/>
        <param name="linear_scale_positive" value="1.0"/>
        <param name="linear_scale_negative" value="1.0"/>
        <param name="angular_scale_positive" value="1.0"/>
        <param name="angular_scale_negative" value="1.0"/>
        <param name="publish_rate" value="80"/>
    </node>

    <include file="$(find rovid_1)/launch/tf_transforms.launch"/>
    <include file="$(find rovid_1)/launch/localization.launch" if="$(arg use_amcl)"/>
    <!-- <include file="$(find rovid_1)/launch/auto_nav.launch"/> -->
    <!-- <include file="$(find rovid_1)/launch/visualization_odom.launch"/> -->

    <node pkg="rosbag" type="play" name="navigation" output="screen" args="--clock $(arg new_path)berhasil_01.bag" if="$(arg use_filebag)"/>
    <node pkg="rosbag" type="play" name="marvelmind" output="screen" args="--clock $(arg new_path)hedge_marvelmind.bag" if="$(arg use_filebag)"/>
</launch>
